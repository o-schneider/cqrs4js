{"version":3,"sources":["../../src/main/js/model/createModel.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;oCAEiB,0BAA0B;;0BACpC,gBAAgB;;AAEpC,IAAM,GAAG,GAAG,KAAK,CAAC;;AAEX,IAAM,WAAW,GAAG,SAAd,WAAW,CAAI,UAAU,EAAE,QAAQ,EAAE,YAAY,EAAyC;oCAApC,+BAA+B;AAA/B,mCAA+B;;;AAChG,MAAM,MAAM,GAAG,2CAAgB,+BAA+B,CAAC,CAAC;AAChE,oBAAM,OAAO,CAAC,EAAC,YAAY,EAAE,UAAU,EAAC,EAAE,EAAC,UAAU,EAAE,QAAQ,EAAC,CAAC,CAAC;;AAElE,MAAI,KAAK,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;;AAEjC,iCAA+B,CAAC,OAAO,CAAC,UAAC,aAAa,EAAK;AACzD,QAAM,WAAW,GAAG,aAAa,CAAC,IAAI,CAAC;AACvC,QAAM,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC;;AAEpC,QAAI,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,iCAAiC,GAAG,WAAW,GAAG,cAAc,GAAG,MAAM,CAAC,CAAC;;AAEhG,cAAU,CAAC,SAAS,CAAC,WAAW,EAAE,UAAC,OAAO,EAAK;AAC7C,WAAK,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC;KAClD,CAAC,CAAC;GACJ,CAAC,CAAC;CAEJ,CAAC","file":"createModel.js","sourcesContent":["'use strict';\n\nimport {initStateHolder} from \"../utils/initStateHolder\";\nimport {check} from '../utils/check';\n\nconst log = false;\n\nexport const createModel = (commandBus, eventBus, initialState, ...listenedCommandsNamesAndActions) => {\n  const freeze = initStateHolder(listenedCommandsNamesAndActions);\n  check.notNull({'commandBus': commandBus}, {'eventBus': eventBus});\n\n  let state = freeze(initialState);\n\n  listenedCommandsNamesAndActions.forEach((actionAndName) => {\n    const commandName = actionAndName.name;\n    const action = actionAndName.action;\n\n    if (log) console.log('about to register command name ' + commandName + \" and action \" + action);\n\n    commandBus.subscribe(commandName, (command) => {\n      state = freeze(action(command, state, eventBus));\n    });\n  });\n\n};\n"]}